<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photo Album Manager</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>
<body>
    <div class="container">
        <aside class="menu-bar">
            <h2>Menu</h2>
            <div class="menu-item"><label for="size-input">Photos per Row:</label><input type="number" id="size-input" value="5" min="1"></div>
            <div class="menu-item"><button id="refresh-btn">Refresh</button></div>
            <div class="menu-item">
                <label for="sort-by">Sort By:</label>
                <select id="sort-by">
                    <option value="capture_time">Capture Time</option>
                    <option value="modification_time">Modification Time</option>
                    <option value="filepath">File Path</option>
                    <option value="filename">Filename</option>
                </select>
                <select id="sort-order">
                    <option value="desc">Descending</option>
                    <option value="asc">Ascending</option>
                </select>
            </div>
            <div class="menu-item"><button id="delete-selected-btn">Delete Selected</button></div>
            <div class="menu-item"><button id="filter-config-btn">Filter Config</button></div>
            <div class="menu-item"><button id="tag-management-btn">Tag Management</button></div>
            <div class="menu-item"><button id="batch-tag-btn">Batch Tag Selected</button></div>
            <div class="menu-item"><button id="undo-btn">Undo</button></div>
        </aside>

        <main class="content-area">
            <div id="photo-wall" class="photo-wall">
                <!-- Thumbnails will be loaded here by JavaScript -->
            </div>
            <div class="pagination">
                <button id="prev-page">Previous</button>
                <span id="page-info">Page 1 of 1</span>
                <button id="next-page">Next</button>
            </div>
        </main>

        <aside class="info-panel">
            <h2>Backend Info</h2>
            <div class="info-section">
                <h3>Org Paths:</h3>
                <ul id="org-paths-list">
                    <!-- Org paths will be loaded here -->
                </ul>
            </div>
            <div class="info-section">
                <h3>Global Tags:</h3>
                <ul id="global-tags-list">
                    <!-- Global tags will be loaded here -->
                </ul>
            </div>
        </aside>
    </div>

    <!-- Modal for original image view -->
    <div id="image-viewer-modal" class="modal">
        <span class="close-modal-btn">&times;</span>
        <img class="modal-content" id="full-image">
        <div class="modal-caption"></div>
        <a class="modal-prev">&#10094;</a>
        <a class="modal-next">&#10095;</a>
    </div>

    <!-- Modal for filter config input -->
    <div id="filter-config-modal" class="modal">
        <div class="modal-dialog-content">
            <span class="close-modal-btn">&times;</span>
            <h3>Advanced Filter Configuration</h3>
            <p>Define an <code>api_select(media)</code> function. 'media' has <code>.tag</code> (list) and <code>.org_PATH</code> (str).</p>
            <textarea id="filter-function-input" rows="10" cols="50" placeholder="def api_select(media):\n    # Example: return 'animal' in media.tag\n    return True"></textarea>
            <button id="apply-filter-btn">Apply Filter</button>
            <button id="clear-filter-btn" style="background-color: #ffc107; margin-left: 10px;">Clear Filter</button>
            <div id="filter-status" style="margin-top:10px; font-size:0.9em;"></div>
        </div>
    </div>

    <!-- Modal for tag management -->
    <div id="tag-management-modal" class="modal">
        <div class="modal-dialog-content">
            <span class="close-modal-btn">&times;</span>
            <h3>Tag Management</h3>
            <input type="text" id="new-tag-input" placeholder="New tag name">
            <button id="add-new-tag-btn">Add Tag</button>
            <h4>Existing Tags:</h4>
            <ul id="manage-tags-list">
                <!-- Tags with delete buttons -->
            </ul>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
